<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <title>Shedule</title>


    <link rel='stylesheet prefetch' href='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css'/>
    <link rel='stylesheet prefetch'
          href='https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.15.35/css/bootstrap-datetimepicker.min.css'/>

    <link rel="stylesheet" href="css/style.css"/>


</head>

<body>

<div class="container">

    <form class="well form-horizontal" action="/schedule/bookTraining" method="post" id="contact_form">
        <fieldset>

            <!-- Form Name -->
            <legend>
                <nav class="navbar navbar-default" role="navigation">
                <div class="navbar-header">

                    <button type="button" class="navbar-toggle" data-toggle="collapse"
                            data-target="#bs-example-navbar-collapse-1">
                        <span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span
                            class="icon-bar"></span><span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="#">Znamenka CRM</a>
                </div>


                <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                    <ul class="nav navbar-nav">
                        <li>
                            <a href="#">Клиенты</a>
                        </li>
                        <li class="active">
                            <a href="#">Расписание</a>
                        </li>
                        <li>
                            <a href="#">Продажи</a>
                        </li>
                        <li>
                            <a href="#">Отчет за смену</a>
                        </li>


                    </ul>


                </div>

                </nav>
            </legend>

            <!-- Collapse item-->


            <!-- Select Basic -->

            <div class="form-group">
                <label class="col-md-4 control-label">Клиент</label>
                <div class="col-md-4 selectContainer">
                    <div class="input-group">
                        <span class="input-group-addon"><i class="glyphicon glyphicon-list"></i></span>
                        <select id="select-client" name="state" class="form-control selectpicker">
                            <option value=" ">Выберите клиента</option>
                            <option th:each="client: ${clients}" th:value="${client.id}" th:text="${client.name}">Alabama</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Select Basic -->
            <div class="form-group">
                <label class="col-md-4 control-label">Абонемент</label>
                <div class="col-md-4 selectContainer">
                    <div class="input-group">
                        <span class="input-group-addon"><i class="glyphicon glyphicon-list"></i></span>
                        <select id="select-abonement" name="state" class="form-control selectpicker">
                            <option value=" ">Выберите абонемент</option>
                            <option>Alabama</option>
                        </select>

                    </div>
                </div>
            </div>

            <!-- Select Basic -->

            <div class="form-group">
                <label class="col-md-4 control-label">Время тренировки</label>
                <div class='col-md-4'>
                    <div class="input-group">
                        <div class='input-group date' id='startTime'>
                       <span class="input-group-addon">
                        <span class="glyphicon glyphicon-calendar"></span>
                    </span> <input type='text' class="form-control"/>

                        </div>
                    </div>
                </div>
            </div>

            <!-- Success message -->
            <div class="alert alert-success" role="alert" id="success_message">Success <i
                    class="glyphicon glyphicon-thumbs-up"></i> Thanks for contacting us, we will get back to you
                shortly.
            </div>

            <!-- Button -->
            <div class="form-group">
                <label class="col-md-4 control-label"></label>
                <div class="col-md-4">
                    <button type="submit" class="btn btn-primary">Запланировать тренировку <span
                            class="glyphicon glyphicon-send"></span></button>
                </div>
            </div>


            <label class="col-md-1 control-label"></label>
            <div class="col-md-4 control-label">
                <iframe src="https://calendar.google.com/calendar/embed?showTitle=0&amp;showPrint=0&amp;showCalendars=0&amp;mode=WEEK&amp;height=600&amp;wkst=2&amp;bgcolor=%23FFFFFF&amp;src=znamenka.ems%40gmail.com&amp;color=%2328754E&amp;ctz=Europe%2FMoscow"
                        style="border-width:0" width="800" height="600" frameborder="0" scrolling="no"></iframe>

            </div>

        </fieldset>
    </form>


    <!-- Collapse end div -->

    <!-- Collapse end div -->
</div>
<!-- /.container -->
<script src='http://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.2/jquery.min.js'></script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.12.0/moment.min.js'></script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.6/js/bootstrap.js'></script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.15.35/js/bootstrap-datetimepicker.min.js'></script>

<script src="js/shedule.js"></script>

<script th:inline="javascript">

    /*<![CDATA[*/


    $(document).ready(function(){
        $( "#select-client" ).change(function() {
            var clientId = $( "#select-client" ).val();
            $.ajax({
                url : "/schedule/abonement",
                type : "get",
                data : {
                    "clientId" : clientId
                },
                success : function(data) {
                    $('#select-abonement').children('option').remove();
                    $.each(data, function(key, value) {
                        $('#select-abonement')
                                .append($("<option></option>")
                                        .attr("value",key)
                                        .text(value));
                    });
                },
                error : function() {
                    console.log("There was an error");
                }

            });
        });
    });
    /*]]>*/
</script>

</body>
</html>
